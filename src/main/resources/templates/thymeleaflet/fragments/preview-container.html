<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!--
/**
 * 統一プレビューコンテナフラグメント
 * 
 * 全てのフラグメントプレビュー表示を統一したスタイルで提供する汎用的なコンテナコンポーネント。
 * カスタムクラス、レスポンシブ対応を包含。
 * 
 * @fragment container - メインプレビューコンテナフラグメント
 * @param additionalClasses {@code String} [optional] 追加CSSクラス
 * @param containerId {@code String} [optional=preview-container] コンテナID
 * @param borderColor {@code String} [optional=zinc-300] ボーダー色 (gray-200, zinc-300等)
 * @param minHeight {@code String} [optional=min-h-32] 最小高さ
 * @param hxGet {@code String} [optional] hx-get 付与値
 * @param hxTrigger {@code String} [optional] hx-trigger 付与値
 * @param hxTarget {@code String} [optional] hx-target 付与値
 * @param hxSwap {@code String} [optional] hx-swap 付与値
 * @param contentFragment {@code Fragment} [optional] プレビューコンテンツ差し込み用フラグメント
 * 
 * @example
 * // 基本的なプレビューコンテナ
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: container()}"></div>
 * 
 * @example
 * // 背景色切替なし、カスタムクラス付き
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: container(false, 'my-custom-class')}"></div>
 * 
 * @example
 * // カスタムボーダー色と高さ
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: container(null, 'custom-preview', 'gray-200', 'min-h-64')}"></div>
 *
 * @example
 * // 追加属性とコンテンツを差し込み
 * <div id="preview-content-slot">
 *   <div>Preview content...</div>
 * </div>
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: container(null, null, null, null, '/path', 'load', 'this', 'innerHTML', ~{::#preview-content-slot})}"></div>
 */
-->
    <div th:fragment="container(additionalClasses, containerId, borderColor, minHeight, hxGet, hxTrigger, hxTarget, hxSwap, contentFragment)"
     th:with="
        customClasses=${additionalClasses ?: ''},
        containerIdName=${containerId ?: 'preview-container'},
        borderColorClass=${borderColor ?: 'zinc-300'},
        minHeightClass=${minHeight ?: 'min-h-32'},
        hxGetValue=${hxGet},
        hxTriggerValue=${hxTrigger},
        hxTargetValue=${hxTarget},
        hxSwapValue=${hxSwap},
        previewContentFragment=${contentFragment}
     ">
    
    <!-- プレビューコンテナ本体 -->
    <div th:id="${containerIdName}" 
         th:class="'relative border-2 border-solid border-' + ${borderColorClass} + ' rounded-lg ' + ${minHeightClass} + ' preview-background-light ' + ${customClasses}"
         th:attr="hx-get=${hxGetValue}, hx-trigger=${hxTriggerValue}, hx-target=${hxTargetValue}, hx-swap=${hxSwapValue}"
         th:style="'--thymeleaflet-preview-light:' + (${previewLightColor} ?: '#f3f4f6') + '; --thymeleaflet-preview-dark:' + (${previewDarkColor} ?: '#1f2937') + ';'">
        
        <div class="preview-viewport-frame relative flex w-full justify-start items-start overflow-auto">
            <div id="preview-viewport" class="preview-viewport w-full flex-none overflow-auto transition-all duration-200 flex flex-col">
                <!-- プレビューコンテンツ -->
                <div class="preview-content w-full flex-1 min-h-0">
                    <!-- HTMXまたは動的コンテンツがここに挿入される -->
                    <div th:if="${previewContentFragment != null}" th:replace="${previewContentFragment}"></div>
                </div>
            </div>
        </div>
        <div id="preview-viewport-badge"
             class="pointer-events-none absolute right-3 top-3 hidden rounded-full border border-gray-200 bg-white/90 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-gray-600 shadow-sm">
            Fit
        </div>
    </div>

    <div id="preview-fullscreen-overlay" aria-hidden="true">
        <div id="preview-fullscreen-frame">
            <div id="preview-fullscreen-host"></div>
        </div>
    </div>

    <style>
        #preview-fullscreen-overlay {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: rgba(15, 23, 42, 0.55);
        }
        #preview-fullscreen-overlay.preview-fullscreen-active {
            display: flex;
        }
        #preview-fullscreen-frame {
            position: relative;
            width: 98vw;
            height: 94vh;
            display: flex;
            flex-direction: column;
            padding: 16px;
            background: #f3f4f6;
            border-radius: 18px;
            box-shadow: 0 24px 60px rgba(15, 23, 42, 0.35);
        }
        #preview-fullscreen-host {
            flex: 1;
            min-height: 0;
            display: flex;
            align-items: stretch;
            justify-content: stretch;
            overflow: auto;
        }
        #preview-container.preview-fullscreen {
            width: 100%;
            height: 100%;
            max-height: 100%;
        }
        #preview-container.preview-fullscreen .preview-viewport-frame {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            overflow: auto;
            justify-content: flex-start;
            align-items: flex-start;
        }
        #preview-container.preview-background-light {
            background-color: var(--thymeleaflet-preview-light, #f3f4f6);
        }
        #preview-container.preview-background-gray {
            background-color: var(--thymeleaflet-preview-dark, #1f2937);
        }
    </style>
</div>

<!--
/**
 * シンプルプレビューコンテナフラグメント
 * 
 * 背景色切替ボタンなしのシンプルなプレビューコンテナ。
 * 基本的なプレビュー表示のみが必要な場合に使用。
 * 
 * @fragment simple - シンプルプレビューコンテナフラグメント
 * @param additionalClasses {@code String} [optional] 追加CSSクラス
 * @param borderColor {@code String} [optional=gray-200] ボーダー色
 * 
 * @example
 * // シンプルなプレビューコンテナ
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: simple()}"></div>
 * 
 * @example
 * // カスタムクラス付きシンプルコンテナ
 * <div th:replace="~{thymeleaflet/fragments/preview-container :: simple('text-center', 'gray-300')}"></div>
 */
-->
<div th:fragment="simple(additionalClasses, borderColor)"
     th:with="
        customClasses=${additionalClasses ?: ''},
        borderColorClass=${borderColor ?: 'gray-200'}
     "
     th:class="'border-2 border-solid border-' + ${borderColorClass} + ' p-8 rounded-lg min-h-20 preview-background-light ' + ${customClasses}">
    
    <!-- プレビューコンテンツ -->
    <div class="preview-content w-full flex-1">
        <!-- 静的コンテンツがここに挿入される -->
    </div>
</div>

</body>
</html>
