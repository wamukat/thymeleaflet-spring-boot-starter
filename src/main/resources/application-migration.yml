# Clean Architecture + DDD 復元プロジェクト用 Feature Toggle 設定
# Phase 4.0: Pre-Migration 基盤構築

thymeleaflet:
  migration:
    # 現在のマイグレーションPhase
    phase: "4.0"
    
    # 監視・品質ゲート設定
    monitoring:
      # レスポンス時間劣化許容範囲 (%)
      response_time_degradation_threshold: 10
      
      # エラー率増加許容範囲 (%)
      error_rate_increase_threshold: 1
      
      # Contract Test必須実行フラグ
      enforce_contract_tests: true

# Contract Testing 設定
contract:
  testing:
    # Golden Master保護モード
    golden_master_protection: true
    
    # 外部仕様変更検出時の処理
    external_spec_change_handling:
      # 即座停止フラグ
      immediate_stop: true
      
      # 自動Git Revert実行
      auto_revert: true
      
      # 通知設定
      notifications:
        enabled: true
        # 通知レベル: CRITICAL, HIGH, MEDIUM, LOW
        level: "CRITICAL"

# 各Phase完了条件
phase_completion_criteria:
  "4.0":
    contract_tests_pass: true
    feature_toggle_configured: true
    golden_master_established: true
    
  "4.1":
    domain_layer_implemented: false
    template_path_replace_eliminated: false
    security_integration_completed: false
    
  "4.2":
    hybrid_services_implemented: false
    usecase_interfaces_defined: false
    legacy_coexistence_verified: false
    
  "4.3":
    adapter_migration_completed: false
    controller_refactored: false
    external_spec_preserved: false
    
  "4.4":
    security_domain_integrated: false
    path_security_service_implemented: false
    
  "4.5":
    legacy_services_removed: false
    clean_architecture_achieved: false

# ログ設定（開発・デバッグ用）
logging:
  level:
    io.github.wamukat.thymeleaflet.contract: DEBUG
    io.github.wamukat.thymeleaflet.domain: DEBUG
    io.github.wamukat.thymeleaflet.application: DEBUG
    io.github.wamukat.thymeleaflet.security: INFO
    org.springframework.security: WARN
